# 关系新数据库 E-R
- 当前主流的数据库，大多基于E-R模型的数据库
- E-R魔心指 实体 - 关系 模型
- 特点：
  * 一个实体可以包含多个列
  * 一行构成一个实体，实体与实体之间可以有多种对应关系
- 这里的实例与面向对象中的类相似。只是这里只关注描述对象的数据（字段），而不关系对象的行为（函数）

# 数据库设计

### 3NF
- 1NF： 列的原子性，即列不可再拆分
- 2NF： 表中不能描述多个信息，不能有数据冗余
- 3NF： 引用其他表中的主键信息

# 约束

保证数据的完整性

 - 非空约束
 - 主键约束
   * primary key constraint 唯一且不为空
   * 主键是数据行的唯一标识。不会重复的列才能当主键。一个表可以没有主键，但是会非常难以处理，因此没有特殊理由表都要设置主键
   * 主键有两种选用策略：业务主键和逻辑主键
     - 业务主键是使用有业务意义的字段做主键。比如身份证号等
     - 逻辑主键是使用没有任何业务意义的字段做主键
     - 推荐用逻辑主键
 - 唯一约束
   * unique constraint 唯一，允许为空，但只能出现一次
 - 默认约束
   * default constraint 默认值
 - 检查约束
   * check constraint 范围及格式限制
 - 外键约束
   * foreign key constraint
   * 增加外键约束时，设置级联更新、级联删除
   
# SQLServer

- 每个数据库包含：
  * 一个主数据文件（.mdf）必须
  * 一个事务日志文件（.ldf）必须
- 可以包含任意多个次要数据文件（.ndf），多个事务日志文件
- 文件组：可将多个数据文件逻辑的分到一组，方便日后管理维护
- 数据库分离，可将数据库文件分离出来，复制到其他地方
- 数据库附加，将数据库文件附加到数据库

### 数据类型
- 文本类型
  * 不带var的，表示固定长度，如果存的值不够指定位数，则末尾使用空格补齐
  * 带var，表示长度可变，如果存的值不够指定位数，以实际存的值为准

对于Unicode编码格式
* 不带n的，英文占1个字节，中文占2个字节
* 带n的，每个字符占2个字节
  
 

