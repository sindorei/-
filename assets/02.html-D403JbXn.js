import{_ as i,c as a,f as e,o as s}from"./app-LHpjaFTr.js";const n="/note/assets/5e79d303ee01d57531000000-C_zcoy8f.png",t="/note/assets/5e79d99bee01d57531000001-BIYfpcEn.png",r={};function h(o,l){return s(),a("div",null,l[0]||(l[0]=[e('<h1 id="商品系统" tabindex="-1"><a class="header-anchor" href="#商品系统"><span>商品系统</span></a></h1><ul><li>主要功能：增删改查商品信息</li><li>支持的主要页面就是商品详情页</li><li>需要考虑 <ul><li>高并发问题</li><li>商品数据规模的问题 <ul><li>数据量多，重量大</li></ul></li></ul></li></ul><h1 id="需要保存哪些数据" tabindex="-1"><a class="header-anchor" href="#需要保存哪些数据"><span>需要保存哪些数据</span></a></h1><p><img src="'+n+'" alt=""></p><ul><li>左边的是商品系统需要存储的</li><li>分而治之 <ul><li>商品基本信息</li><li>商品参数</li><li>图片视频</li><li>商品介绍</li></ul></li></ul><h1 id="商品基本信息如何存储" tabindex="-1"><a class="header-anchor" href="#商品基本信息如何存储"><span>商品基本信息如何存储</span></a></h1><ul><li>数据库中建一张表存储</li><li>数据库前加一个缓存</li><li>保留商品数据的每一个历史版本</li></ul><h2 id="缓存策略" tabindex="-1"><a class="header-anchor" href="#缓存策略"><span>缓存策略</span></a></h2><ul><li>Cache Aside <ul><li>无特殊情况，首先考虑这种</li></ul></li><li>Read/Write Through</li><li>Write Behind</li></ul><h1 id="使用mongodb保存商品参数" tabindex="-1"><a class="header-anchor" href="#使用mongodb保存商品参数"><span>使用MongoDB保存商品参数</span></a></h1><ul><li>数据量大、数据结构不统一，MongoDB很合适</li></ul><h1 id="使用对象存储保存图片和视频" tabindex="-1"><a class="header-anchor" href="#使用对象存储保存图片和视频"><span>使用对象存储保存图片和视频</span></a></h1><ul><li>数据库中只保存图片视频的id或URL</li><li>实际的图片视频以文件方式单独存储</li><li>首选方式是保存在对象存储（Object Storage）中</li><li>云服务厂商 <ul><li>七牛</li><li>AWS的s3</li></ul></li><li>开源对象存储：MinIO</li></ul><h1 id="将商品介绍静态化" tabindex="-1"><a class="header-anchor" href="#将商品介绍静态化"><span>将商品介绍静态化</span></a></h1><ul><li>比重最大</li><li>一般都是随着商品详情页一起静态化，保存在HTML文件中</li><li>节省服务器资源</li><li>利用CDN加速</li><li>商品价格、促销信息等需要频繁变动的信息，可在前端请求商品系统动态获取</li></ul><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><p><img src="'+t+'" alt=""></p><h1 id="思考" tabindex="-1"><a class="header-anchor" href="#思考"><span>思考</span></a></h1><ul><li>用户下单正好赶上商品调价，商品详情页看到的价格和下单后的价格不一致</li></ul>',19)]))}const c=i(r,[["render",h],["__file","02.html.vue"]]),p=JSON.parse('{"path":"/geektime/back-end-storage-practical-lession/02.html","title":"商品系统","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"缓存策略","slug":"缓存策略","link":"#缓存策略","children":[]}],"git":{"updatedTime":1645921900000,"contributors":[{"name":"sindorei","email":"wupan1030@foxmail.com","commits":3,"url":"https://github.com/sindorei"}]},"filePathRelative":"geektime/back-end-storage-practical-lession/02.md"}');export{c as comp,p as data};
